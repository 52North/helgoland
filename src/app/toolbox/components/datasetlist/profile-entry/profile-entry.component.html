<ng-template #modalTimeseriesStyleSelector let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">Timeseries style</h4>
        <button type="button" class="close" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <n52-timeseries-style-selector [timeseriesColor]="editableOptions.color" (onColorChange)="tempColor = $event"></n52-timeseries-style-selector>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="updateColor(); c();">Ok</button>
        <button type="button" class="btn btn-light" (click)="c();">Cancel</button>
    </div>
</ng-template>

<ng-template #modalGeometryViewer let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">Station location</h4>
        <button type="button" class="close" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <n52-geometry-map-viewer [mapId]="'mapGeometryViewerModal'" [geometry]="dataset.station.geometry" [maxMapZoom]="15"></n52-geometry-map-viewer>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="c();">Close</button>
    </div>
</ng-template>

<div class="legendItem" style="position: relative;" [ngStyle]="{'border-color': datasetOptions.color}" [ngClass]="{'selected': selected}"
    (click)="toggleSelection()">
    <div class="loading-overlay" *ngIf="datasetOptions.loading" [ngStyle]="{'background-color': datasetOptions.color}">
        <div class="fa fa-refresh fa-spin fa-3x fa-fw"></div>
    </div>
    <div ng-controller="SwcToggleInformationCtrl">
        <div class="legendItemheader">
            <div class="legendItemLabel" [ngStyle]="{'color': datasetOptions.color}">
                <n52-label-mapper label="{{dataset?.parameters.platform.label}}"></n52-label-mapper>
            </div>
            <div class="small">
                <n52-label-mapper label="{{dataset?.parameters.phenomenon.label}}"></n52-label-mapper>
                <span *ngIf="uom">[<n52-label-mapper label="{{dataset.uom}}"></n52-label-mapper>]</span>
            </div>
            <div class="small">
                <n52-label-mapper label="{{dataset?.parameters.procedure.label}}"></n52-label-mapper>
            </div>
            <div class="small" *ngIf="dataset?.parameters.category.label != dataset?.parameters.phenomenon.label">
                <n52-label-mapper label="{{dataset?.parameters.category.label}}"></n52-label-mapper>
            </div>
        </div>
        <div *ngFor="let item of datasetOptions">
            <div>
                <span [ngStyle]="{'color': item.color}">{{item.timestamp | date: 'dd.MM.yy HH:mm'}}</span>
                <span class="fa" [ngClass]="{'fa-eye-slash': item.visible, 'fa-eye': !datasetOptions.visible}" (click)="toggleVisibility(item); $event.stopPropagation();"></span>
                <span class="fa fa-pencil" (click)="editColor(item); $event.stopPropagation();" [ngStyle]="{color: item.color}"></span>
                <span class="fa fa-times" (click)="removeDatasetOptions(item); $event.stopPropagation();"></span>
            </div>
        </div>
    </div>
</div>